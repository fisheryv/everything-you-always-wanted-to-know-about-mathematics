% !TeX root = ../../book.tex
\section{索引集}

\subsection{动机}

让我们讨论一个我们之前简单提过并且已经使用过的概念：集合\textbf{索引}。当我们希望定义或引用大量集合而不显式写出所有集合时，这种表示法会很方便。使用与我们已经定义的集合运算类似的符号，我们将能够``一次性''``组合''和``操作''大量集合。本节确实没有新的数学内容，但其思想中涉及的符号一开始可能会令人困惑且难以使用，因此我们希望仔细引导你了解这些思想。

\subsubsection*{与求和符号的关系}

我们先从之前见过的相关概念入手。还记得我们在第一章中研究自然数之和吗？我们提到了一些特殊符号，让我们能够使用 $\sum$ 符号将一长串求和项压缩成一种简洁的形式。例如，我们可以用 $\sum$ 表示法写出一个非正式的求和（``非正式''意味着``不严格''，因为使用了省略号），如下所示：
\[1 + 2 + 3 + 4 + \dots + (n - 1) + n = \sum_{i=1}^{n} i\]

为什么这个符号有效且合理？关键在于\textbf{索引变量} $i$。在 $\sum$ 符号下方写下 ``$i = 1$'' 意味着变量 $i$ 的值应从 $1$ 开始每次增加 $1$，直到达到写在 $\sum$ 符号上方的终值 $n$。对于该范围（从 $1$ 到 $n$）内的每个允许的 $i$ 值，我们在 $\sum$ 符号右侧的包含一个求和项；在上面案例中，该求和就是 $i$。因此，我们应该有项 $1, 2, 3,\dots, n$ 并用 $+$ 号将它们相连。

这里需要指出，将 $i = 1$ 和 $n$ 写为索引变量 $i$ 的\textbf{限制}意味着 $i$ 假设所有值都是 $1$ 到 $n$ 之间的自然数。

\subsubsection*{示例}

我们先通过一个例子来看看定义索引集的过程。我们还将了解如何使用索引变量将集合运算应用于多个集合。\\

\begin{example}\label{ex:example3.6.8}
    我们可以类似地压缩某些集合运算符。例如，让我们定义集合 $A_1, A_2, A_3, \dots, A_{10}$
    \begin{align*}
        A_1 &= \{1, 2\} \\
        A_2 &= \{2, 4\} \\
        A_3 &= \{3, 6\} \\
        &\vdots \\
        A_i &= \{i, 2i\} \\
        &\vdots \\
        A_{10} &= \{10, 20\}
    \end{align*}

    我们包含了 $A_i$ 对\emph{任意}值 $i$ 的定义，以便为这些集合提供严格的定义。如果不定义该集合（将 $A_i$ 定义为 $i$ 的任何相关值），读者需要自行解释集合 $A_1,A_2,A_3,A_{10}$ 之间的模式，并且可能产生多种解释方式。通过像这样明确定义 $A_i$ 项，这 $10$ 个集合是什么就不会产生混淆了。

    此外，我们可以更轻松地表达所有这些集合的并集。请记住，两个集合的并集是包含两个集合所有元素的集合（即，如果某个元素位于第一个集合或第二个集合中，或者可能同时位于两个集合中，则该元素包含在并集中）。两个以上集合的并集是什么？它遵循与两个集合的定义相同的思想；如果某个元素位于我们通过并集运算组合的\emph{任何}成分集合中，我们希望将其包含在并集中。

    怎样才能把这个并集写得简洁、准确呢？我们遵循与 $\sum$ 表示法的相同方式。这些集合的索引从 $1$ 到 $10$，因此我们应该在 ``$\cup$'' 符号下方写 $i = 1$，在其上方写 $10$。并集中的每一项的形式为 $\{i, 2i\}$，因此我们应该将其写在 ``$\cup$'' 符号的右侧。不过，对于像这样的索引联合，我们使用稍大的 ``$\bigcup$'' 符号，如下所示：
    \[A_1 \cup A_2 \cup A_3 \cup \dots \cup A_{10} = \bigcup_{i=1}^{10}A_i=\bigcup_{i=1}^{10}\{i, 2i\}\]
    这比写出所有 $10$ 个集合的元素要简洁得多，因此你可以看到这种表示法是多么的\emph{有用}。我们会不断提醒你左侧并集中省略号的不精确性，并告诉你实际上，像右侧这样的表达式是关于该并集的真正严格的数学陈述。左边的表达式更多的是一种直观的、启发式的方式来描述这 $10$ 个集合的并集。
\end{example}

\subsubsection*{当索引集不是数字范围时}

让我们看一个更难的例子，来进一步发展这种表示技术。如果我们要求你用求和符号写出以下求和：所有质数的平方倒数之和，该怎么办？我们怎样才能做到这一点？（注意：我们只是想表达求和的所有项而不计算出总和。这是一项艰巨的任务，留待下次吧！）

不幸的是，我们不能使用与上面完全相同的表示法，因为我们不想对两个自然数之间的一系列索引值求和；相反，我们只想在求和中包含与质数相关的项。解决这个问题的方法是定义一个\textbf{索引集} $I$，它将描述索引的允许值，然后我们将其``插入''求和右侧的任意项。

在这种情况下，如果我们有一个质数 $i$，我们希望在求和中包含 $\frac{1}{i^2}$ 项，因此该表达式将写在 $\sum$ 符号的右侧。 我们想用符号来表达值 $i$ 应该是质数并且应该包括所有可能的质数。因此，允许值的索引集合 $I$ 应该是所有质数的集合。也就是说，我们可以将这个求和写为：
\[\sum_{i \in i}\frac{1}{i^2}, \text{其中}\; I = \{i \in \mathbb{N} \mid i \text{为质数}\}\]

看看这个符号的作用！我们不仅将无穷多项压缩为一个表达式，而且还指出任意索引 $i$ 的值应限制为质数，而质数不像 $\sum_{i=1}^{n}i$ 那样以``通常''且简便的方式描述。\\

\begin{example}
    \emph{索引集}的概念非常有用，可以扩展到任意集合甚至非数学对象。例如，在前面对集合的讨论中，我们使用了所有 NBA 球队的集合 $B$。我们如何用这个集合来表达 NBA 所有球员的集合 $P$？每个球队本身就是一个集合，其元素是该球队中的球员，因此所有球队的并集（即 $B$ 中所有集合的并集）应该准确地生成所有球员的集合！在这种情况下，我们的索引集是 $B$，对于每个元素 $b \in B$，我们希望将 $b$ 作为集合包含在我们的并集中。因此，我们会写
    \[P = \bigcup_{b \in B} b\]

    该并集中的各项甚至不依赖于自然数，因此如果不使用索引集，就无法表达像上面这样的并集。此外，该并集依赖于这样一个事实：并集的项是索引集 $B$ 的元素，但它们本身也是集合；因此，对它们运用并集运算具有数学意义。这可能看起来仍然是一个奇怪的思想，所以一定要仔细思考集合的元素本身也是集合这一思想。
\end{example}

\subsubsection*{朗读索引表达式}

为了用语言表达这些类型的表达方式，并帮助你在头脑中思考它们，让我们举一个例子。我们可以将上面的表达式读作

\begin{quote}
    ``对 $\frac{1}{i^2}$ 求和，其中 $i$ 为全体质数。'' \\
    或 \\
    ``对所有质数 $i$，求和 $\frac{1}{i^2}$。'' 
\end{quote}
同样，我们可以将上面的另一个表达式读作
\begin{quote}
    ``对所有集合 $b$ 取并集，其中 $b$ 为 2023 赛季 NBA 球队。'' \\
    或 \\
    ``对所有 2023 赛季 NBA 球队，取并集。'' 
\end{quote}

\subsection{索引并集和交集}\label{sec:section3.6.2}

让我们给出多个集合并集运算的精确定义，因为之前我们只是严格定义了两个集合的并集。

\begin{definition}\label{def:definition3.6.1}
    由集合 $I$ 索引的一组集合 $A_i$ 的并集为
    \[\bigcup_{i \in I} A_i = \{x \in U \mid \text{对于某个（至少一个）} i \in I, x \in A_i \}\]
    其中我们假设存在全集 $U$, 且对于所有 $i \in I$, $A_i \subseteq U$。
\end{definition}

在数学语言中，短语``对于某些 $i \in I$''意味着我们想要至少一个具有指定属性的 $i \in I$。如果一个元素 $x$ 对于每个 $i \in I$ 都满足 $x \notin A_i$，那么这表示 $x$ 不属于我们集合中的任何集合，因此它不应该包含在并集中。

遵循这个思路，我们可以对集合交集做出类似的定义。

\begin{definition}\label{def:definition3.6.2}
    由集合 $I$ 索引的一组集合 $A_i$ 的交集为
    \[\bigcap_{i \in I} A_i = \{x \in U \mid \text{对于每个} i \in I, x \in A_i \}\]
    其中我们假设存在全集 $U$, 且对于所有 $i \in I$, $A_i \subseteq U$。
\end{definition}

\subsection{示例}

让我们回到前面的例子，让这些思想更加清晰。\\

\begin{example}
    之前，在例 \ref{ex:example3.6.8} 中，我们定义了对于 $1$ 到 $10$ 之间的每个自然数 $i$。
    \[A_i = \{i, 2i\}\]
    定义该集合的另一种方法是使用索引集 $I = [10]$ （回想一下符号 $[n] = {i \in \mathbb{N} \mid 1 \le i \le n}$）并将 $A$ 定义为集合
    \[A = \{A_i \mid i \in I\}, \text{其中对于所有} i \in I, A_i = \{i, 2i\}\]
    这定义了每个集合 $A_i$，取决于从索引集 $I$ 中选择的索引值 $i$，并将所有这些集合``收集''到集合 $A$ 中。然后，我们可以基于 $I$ 和 $A_i$ 的定义用另一种方式编写并集
    \[\bigcup_{i \in I} A_i\]
    （仔细思考一下这个并集和集合 $A$ 有什么不同。还有，这个并集到底是什么？我们如何方便的表达它的元素？我们需要列出每个元素吗？如果我们把索引集合 $I$ 改为 $\mathbb{N}$ 呢？上面的并集会是什么？）
\end{example}

\begin{example}
    设 $I = \{1, 2, 3\}$，对于所有 $i \in I$，定义
    \[A_i = \{i - 2, i - 1, i, i + 1, i + 2\}\]
    让我们找出并写下以下集合的元素：
    \[\bigcup_{i \in I} A_i \qquad\text{和}\qquad \bigcap_{i \in I} A_i\]
    请注意，我们可以写出每个 $A_i$ 集合的元素，如下所示：
    \begin{align*}
        A_1 &= \{-1, 0, 1, 2, 3\} \\
        A_2 &= \{0, 1, 2, 3, 4\} \\
        A_3 &= \{1, 2, 3, 4, 5\}
    \end{align*}
    因此
    \[\bigcup_{i \in I} A_i = A_1 \cup A_2 \cup A_3 = \{-1, 0, 1, 2, 3, 4, 5\}\]
    且
    \[\bigcap_{i \in I} A_i = A_1 \cap A_2 \cap A_3 = \{1, 2, 3\}\]
    现在，考虑 $J = {-1, 0, 1}$, $A_j$ 的定义方式与之前相同。让我们来找出下面集合的元素
    \[\bigcup_{j \in J} A_j \qquad\text{和}\qquad \bigcap_{j \in J} A_j\]
    写出每个集合的元素，我们可以确定
    \[\bigcup_{j \in J} A_j = A_{-1} \cup A_0 \cup A_1 = \{-3, -2, -1, 0, 1, 2, 3\}\]
    且
    \[\bigcap_{j \in J} A_j = A_{-1} \cap A_0 \cap A_1 = \{-1, 0, 1\}\]
    尝试使用不同的索引集回答相同的问题。
    例如，考虑 $K = \{1, 2, 3, 4, 5\}$ 或 $L = \{-3, -2, -1, 0, 1, 2, 3\}$。
\end{example}

\begin{example}
    定义索引集 $I = \mathbb{N}$。对于所有 $i \in I$，定义集合
    \[C_i = \Bigg\{x \in \mathbb{R} \mid 1 \le x \le \frac{i + 1}{i}\Bigg\}\]
    则我们声称
    \[\bigcup_{i \in I} C_i = \{y \in \mathbb{R} \mid 1 \le y \le 2\} \qquad\text{和}\qquad \bigcap_{i \in I} C_i = \{1\}\]
    你知道为什么上述陈述为真吗？稍后我们将讨论证明这种等式所需的技术。现在，我们请你思考一下为什么这些都是正确的。你能向同学或朋友解释一下吗？你会用什么技术来证明这些主张？ 
\end{example}

\begin{example}
    令 $S$ 为参加这门课程的学生的集合。对于每个 $s \in S$，令 $C_s$ 表示学生 $s$ 本学期所修课程的集合。下列表达式分别代表什么？
    \[\bigcup_{s \in S} C_s \qquad\text{和}\qquad \bigcap_{s \in S} C_s\]
    我们打赌你至少可以找到右侧集合中的一个元素！
\end{example}

\subsection{划分}

现在我们有了一种写出许多集合的并集的方法，由此我们可以定义一个有用的概念：\textbf{划分}。从语言上来说，划分是一种``将物体分解成部分''的方式，从数学上来说，这正是这个词的意思。

也就是说，划分只是一个集合中不重叠的子集的集合，其并集是整个集合。让我们在这里写下该定义，然后查看一些示例和伪例。将来我们会多次使用这个定义，所以现在让我们在讨论集合和索引并集时先定义好它。

\begin{definition}\label{def:definition3.6.9}
    设 $A$ 为集合。$A$ 的\dotuline{划分}是两两不相交且并集为 $A$ 的集合的集合。

    也就是说，划分由满足以下条件的索引集 $I$ 和非空集 $S_i$（定义在每个 $i \in I$ 上）构成：
    \begin{enumerate}[label=(\arabic*)]
        \item 对于所有 $i \in I, S_i \subseteq A$。
        \item 对于所有 $i, j \in I \;\text{且}\; i \ne j$，我们有 $S_i \cap S_j = \varnothing$。
        \item $\bigcup_{i \in I} S_i = A$
    \end{enumerate}
    这里集合 $S_i$ 称为划分的\dotuline{部分}。
\end{definition}

这里的思想是集合 $S_i$ 将集合 $A$ ``分割''成不重不漏的部分。\\

\begin{example}
    让我们看几个例子
    \begin{enumerate}[label=(\arabic*)]
        \item 考虑集合 $\mathbb{N}$。设 $O$ 为奇数集合，设 $E$ 为偶数集合。 那么 $\{O, E\}$ 就是 $\mathbb{N}$ 的划分。这是因为
        \begin{itemize}
            \item $E, O \ne \varnothing$,
            \item $E, O \subseteq N$,
            \item $E \cap O = \varnothing$,
            \item $E \cup O = \mathbb{N}$ 
        \end{itemize}
        \item 考虑集合 $\mathbb{R}$。对于每个 $z \in \mathbb{Z}$，将集合 $S_z$ 定义为
        \[S_z = \{r \in \mathbb{R} \mid z \le r \le z + 1\}\]
        我们说 $\{\dots, S_{-2}, S_{-1}, S_0, S_1, S_2, \dots \}$ 是 $\mathbb{R}$ 的划分。你知道为什么吗？尝试写出这些集合成为划分所需的条件，看看你是否能理解为什么它们成立。
        具体来说，请记住，我们需要这些集合是成对不相交的。这意味着任意两个集合都必须是不相交的。特别注意，这与要求所有集合的交集为空完全不同。
        例如，考虑下面一组集合
        \[\big\{\{1, 2\}, \{2, 3\}, \{3, 4\}\big\}\]
        该集合就不是成对不相交的，因为
        \[\{1, 2\} \cap \{2, 3\} = \{2\} \ne \varnothing\]
        然而，所有三个集合的交集却是空集，因为这三个集合没有共同元素。
    \end{enumerate}
\end{example}

\begin{example}
    接着让我们看几个伪例。
    \begin{enumerate}[label=(\arabic*)]
        \item 考虑集合 $\mathbb{R}$。令 $P$ 为正实数集合，令 $N$ 为负实数集合。那么 $\{N, P\}$ 不是一个划分，因为 $0 \notin N \cup P$。
        你能否换一种方式，将 $\mathbb{R}$ 划分为两部分？
        \item 考虑集合 $Z$。设 $A_2$ 为 $2$ 的倍数的整数集合，设 $A_3$ 为 $3$ 的倍数的整数集合，设 $A_5$ 为 $5$ 的倍数的整数集合。集合 $\{A_2, A_3, A_5\}$ 不是划分有两个原因。
        \begin{itemize}
            \item 首先，这些集合不是成对不相交的。比如 $6=2 \cdot 3$，所以 $6 \in A_2$ 且 $6 \in A_3$。
            \item 其次，这些集合并未``覆盖''所有 $\mathbb{Z}$。比如 $7 \in \mathbb{Z}$ 但 $7 \notin A_2 \cup A_3 \cup A_5$。
        \end{itemize}
    \end{enumerate}
\end{example}

正如我们前面提到的，我们将来会经常使用这个定义，所以请牢记它。

\subsection{习题}

\subsubsection*{温故知新}

以口头或书面的形式简要回答以下问题。这些问题全都基于你刚刚阅读的内容，所以如果忘记了具体的定义、概念或示例，可以回去重读相关部分。确保在继续学习之前能够自信地回答这些问题，这将有助于你的理解和记忆！

\begin{enumerate}[label=(\arabic*)]
    \item 什么是索引集？
    \item 令 $I = \mathbb{N}$，对于每个 $i \in I$，令 $A_i = \{i, -i\}$。为什么下面的集合都是同一个集合？
    \[\bigcup_{i \in I} A_i \qquad \bigcup_{x \in \mathbb{N}} A_x \qquad \bigcup_{j \in I} A_j\]
    顺便问一下，这个集合的元素是什么？
    \item 列出下列集合的元素：
    \begin{enumerate}[label=(\alph*)]
        \item $\displaystyle{\bigcup_{x \in \mathbb{N}}\{x\}}$
        \item $\displaystyle{\bigcap_{x \in \mathbb{N}}\{x\}}$
        \item $\displaystyle{\bigcup_{x \in \mathbb{N}}\{x,0,-x\}}$
    \end{enumerate}
    \item 你认为为什么我们不谈论``索引差集''或``索引补集''，而只谈论并集和交集？
    \item 什么是划分？集合的集合必须满足什么条件才能成为集合的划分？
\end{enumerate}

\subsubsection*{小试牛刀}

尝试回答以下问题。这些题目要求你实际动笔写下答案，或（对朋友/同学）口头陈述答案。目的是帮助你练习使用新的概念、定义和符号。题目都比较简单，确保能够解决这些问题将对你大有帮助！

\begin{enumerate}[label=(\arabic*)]
    \item 设集合 $A = \{-2, -1, 0, 1, 2\}$。集合$ B = \{1, 3, 5\}$。对于所有 $i \in \mathbb{Z}$，令 $S_i = \{i - 2, i, i + 2, i + 4\}$。$\displaystyle{\bigcup_{i \in A}S_i}$ 和 $\displaystyle{\bigcap_{x \in B}S_x}$ 分别是什么？
    \item 对于所有 $n \in \mathbb{N}$，令 $A_n = [n]$。$\displaystyle{\bigcap_{x \in \mathbb{N}}A_n}$ 和 $\displaystyle{\bigcup_{x \in \mathbb{N}}A_n}$ 分别是什么？
    \item 找到一种方法，使用集合生成符来编写 $-10$ 到 $10$（含）之间的所有整数的集合。然后，使用索引并集定义相同的集合。你能以某种方式做到这一点，使你并集中的集合是成对不相交的（意味着它们中没有两个有共同元素）吗？（提示：可以。）
    \item 对于每个 $n \in \mathbb{N}$，令 $M_n$ 为 $n$ 的所有倍数的集合。（例如，$M_3 = \{3, 6, 9,\dots\}$。）使用集合构建符编写 $M_n$ 的定义。 然后，使用这些集合将 $\mathbb{N}$ 表示为并集。
    （\textbf{挑战：}你能用这些集合来定义 $\mathbb{N}$ 的划分吗？）
    \item 设 $X$ 为任意集合。$\displaystyle{\bigcup_{S \in \mathcal{P}(X)}S}$ 和 $\displaystyle{\bigcap_{S \in \mathcal{P}(X)}S}$ 分别是什么？
    （首先尝试使用特定的集合（例如 $X = \{1, 2\}$）来看看会发生什么可能会有所帮助。）
    \item 将 $\mathbb{Q}$ 表示为索引并集。
    让索引集中有无限多个元素能实现这一点吗？
    （\textbf{挑战：}你能把这个集合做成 $\mathbb{Q}$ 的一个划分吗？）
\end{enumerate}