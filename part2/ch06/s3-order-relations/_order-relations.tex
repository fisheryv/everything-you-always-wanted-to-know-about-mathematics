% !TeX root = ../../../book.tex
\section[顺序关系]{[选学]顺序关系}\label{sec:section6.3}

我们来讨论某些类似于 ``$le$'' 的关系以其固有属性。这是因为这些关系在常见的数集 --- $\mathbb{N}, \mathbb{R}, \mathbb{Q}, \mathbb{R}$ --- 上很容易定义，并且它们还适用于一些其他可能令人意外的情况。首先，我们会给出定义，然后举一些例子。接着，我们将通过这些例子来引出一些有趣的顺序关系性质，并对这些性质进行陈述和证明。\\

\begin{definition}
    设 $R$ 为定义在集合 $A$ 上的关系。

    \begin{itemize}
        \item 如果 $R$ 具有自反性、传递性和反对称性，那么我们称 $R$ 为集合 $A$ 上的\dotuline{偏序关系 (Partial Order)}。
        \item 如果 $R$ 具有自反性、传递性和反对称性，同时还满足
        \[\forall x, y \in A \centerdot (x, y) \in R \lor (y, x) \in R\]
        那么我们称 $R$ 为集合 $A$ 上的\dotuline{全序关系 (Total Order)}。（也就是说，全序关系是一种偏序关系，其中集合中的任意两个元素都可以相互比较。）
    \end{itemize}
\end{definition}

这个定义告诉我们什么是偏序什么是全序。接下来的定义将为描述集合上的偏序和全序提供一些有用的简写。\\

\begin{definition}
    当 $R$ 是集合 $A$ 上的偏序关系时，我们称对 $(A, R)$ 为\dotuline{偏序集 (Partially Ordered Set)}，有时简写为  \dotuline{poset}。

    当 $R$ 是集合 $A$ 上的全序关系时，我们称对 $(A, R)$ 为\dotuline{全序集 (Totally Ordered Set)}，有时简写为  \dotuline{toset}。
\end{definition}

我们将尝试通过几个相关例子来解释这些术语的含义。\\

\begin{example} \label{ex:example6.3.3}
    定义 $\mathbb{R}$ 上的如下四个关系：
    \begin{align*}
        (x, y) \in R_1 &\iff x \le y \\
        (x, y) \in R_2 &\iff x < y \\
        (x, y) \in R_3 &\iff x = y \\
        (x, y) \in R_4 &\iff \lfloor x \rfloor = \lfloor y \rfloor
    \end{align*}
    （请记住，$\lfloor x \rfloor = \max\{a \in \mathbb{Z} \mid a \le x\}$ 表示对实数``向下取整''；也就是我们通过向下舍去得到的整数。）

    这些关系中哪些是偏序关系？哪些是全序关系？抑或既不是偏序关系也不是全序关系？请花几分钟时间思考，并尝试画出证明你观点的草图，或将你的观点解释给朋友或同学听。

    现在，我们来分享一下我们的看法。关系 $R_1$ 和 $R_3$ 是偏序关系，但只有 $R_1$ 是全序关系。关系 $R_2$ 和 $R_4$ 既不是偏序关系也不是全序关系（因为 $R_2$ 不满足自反性，$R_4$ 不满足反对称性）。任何类型的顺序关系（无论是偏序还是全序）的基本思想是，我们可以以某种方式\emph{比较}集合 $A$ 中的元素，并对它们进行\emph{排序}。简单来说，偏序关系在集合 $A$ 中形成``链''，在每条链上，我们可以将元素排成一排，有点像数轴上的数字；而全序关系则只有一条``链''，包含了集合 $A$ 的所有元素。
\end{example}

你可能会觉得 $R_2$ 仍然有某种``顺序''的特性，这样的观点也有道理。$R_2$ 和 $R_1$ 的唯一区别在于 $R_2$ 不允许元素相等；换句话说，``$\le$'' 的定义中包含了``或等于''，而 ``$<$'' 的定义中则没有。这使得 $R_2$ 不具有自反性，仅此而已。你可能还会注意到，关系 $R_4$ 与 $R_1$ 没有这种类似的关系，它似乎是不同的（我们会在后面详细讨论）。这引出了以下几个定义，其中偏序关系或全序关系可以``放宽''到相关的排序。\\

\begin{definition}
    设 $A$ 为集合，$R$ 为 $A$ 上的关系。我们称 $R$ 具有\dotuline{非自反性}当且仅当
    \[\forall x \in A \centerdot (x, x) \notin R\]
\end{definition}

请注意，这与单纯的``不具自反性''是不同的。考虑一下量词：自反性意味着每个元素都与自身相关，因此它的逻辑否定表示存在至少一个元素不与自身相关。而非自反性则表示每个元素都不与自身相关。\\

\begin{definition}
    设 $A$ 为集合，$R$ 为 $A$ 上的关系。
    
    如果 $R$ 具有非自反性、传递性和反对称性，我们称 $R$ 为\dotuline{严格偏序}。

    如果 $R$ 具有非自反性、传递性和反对称性，同时还满足
    \[\forall x, y \in A \centerdot x \ne y \implies [(x, y) \in R \lor (y, x) \in R]\]
    我们称 $R$ 为\dotuline{严格全序}。
\end{definition}

你可能会好奇，这与非严格顺序关系有什么联系？其实，我们有一种自然的方法可以把任何顺序关系转换为严格的顺序关系，反之亦然。通过添加或去掉元素与自身的关系，我们可以定义出这两种顺序关系。下面的引理总结了这一转换方法，并证明了严格顺序和非严格顺序的数量是相同的。

\newpage

\begin{lemma}
    设 $(A, R_1)$ 为偏序集。关系 $S_1$ 定义为
    \[(x, y) \in S_1 \iff [(x, y) \in R_1 \land x \ne y]\]
    是 $A$ 上的严格偏序。\\

    设 $(A, R_2)$ 为全序集。关系 $S_2$ 定义为
    \[(x, y) \in S_1 \iff [(x, y) \in R_2 \land x \ne y]\]
    是 $A$ 上的严格全序。\\

    设 $(A, S_3)$ 为严格偏序集。关系 $R_3$ 定义为
    \[(x, y) \in R_3 \iff [(x, y) \in S_3 \lor x = y]\]
    是 $A$ 上的（不严格）偏序。\\

    设 $(A, S_4)$ 为严格全序集。关系 $R_4$ 定义为
    \[(x, y) \in R_4 \iff [(x, y) \in S_4 \lor x = y]\]
    是 $A$ 上的（不严格）全序。
\end{lemma}

回想一下上面在 $\mathbb{R}$ 上定义的关系 $R_1$ 和 $R_2$，把``少于''定义为``少于或等于且不等于''可能显得有些奇怪，太啰嗦了！然而，这只是我们在语言上描述 ``$\le$'' 的方式造成的。从数学角度来看，讨论自反关系以及偏序与全序，然后再将它们转换为严格序更为自然。很快我们会在讨论最小元素时看到，自反性是一个很好的性质，这也合理解释了为什么我们会先从偏序开始，再修改定义以允许严格序，而不是反过来。现在，只需注意 $R_2$ 是对应于全序 $R_1$ 的严格全序。\\

问题：是否存在对应于偏序 $R_3$ 的严格偏序？如果存在，它是什么？如果不存在，为什么？\\

关系 $R_4$ 既不是严格的序关系，也不是其他类型的序关系。然而，请注意，$R_4$ 很好地将 $\mathbb{R}$ 的元素``打包''在一起。本质上，在这个关系下，每个满足 $1 \le y < 2$ 的实数 $y$ 都是``相同的''。对于每个满足 $2 \le y < 3$ 的 $y$ 也是如此，以及每个满足 $-5 \le y < -4$ 的 $y$，等等。一旦完成了这种``打包''，我们就可以给这些``包''分配一个顺序，但这个顺序的信息并没有在关系 $R_4$ 中体现出来。我们需要做一些额外的工作来强加此顺序。按照它的定义，这就是为什么 $R_4$ 不是任何类型的序关系。然而，由于这种良好的``打包''特性，将集合的元素划分成不同的类，所以我们称它为``\emph{等价关系}''。这是我们将在下一节中探讨的概念。一旦我们建立了这些``包''，我们就可以比较它们并对它们进行排序。\\

让我们在 $\mathbb{R}$ 之外的其他上下文中探讨一些例子。以下关系之一是偏序的一个标准例子。\\

\begin{example}
    设 $S=[3]$，考虑幂集 $\mathcal{P}(S)$。（集合 $S$ 的幂集是 $S$ 所有子集的集合）定义 $\mathcal{P}(S)$ 上的如下关系，其中 $X, Y \subseteq S$：
    \begin{align*}
        (X, Y) \in R_1 &\iff X \subseteq Y \\
        (X, Y) \in R_2 &\iff X \subset Y \\
        (X, Y) \in R_3 &\iff X \cap Y = \varnothing \\
        (X, Y) \in R_4 &\iff X \Delta Y = S
    \end{align*}
    回忆一下，$X \Delta Y$ 是集合 $X$ 和 $Y$ 的\emph{对称差} (Symmetric Difference)，其定义为 $X \Delta Y = (X - Y) \cup (Y - X) = (X \cup Y) - (X \cap Y)$。

    我们声称 $R_1$ 是偏序关系但不是全序关系。在证明该观点之前，先来思考一个更具挑战的问题：你能在 $\mathcal{P}(S)$ 上定义一个全序关系吗？你能以一种能够推广到 $S = [n]$ 的方式来定义全序关系吗，其中 $n$ 是任意自然数 $n \in \mathbb{N}$。

    现在，为了证明 $R_1$ 是一个偏序关系，我们必须证明它具备自反性、传递性和反对称性。为了证明它不是全序关系，我们还需要证明它不满足所有元素都可比较这一附加条件。我们将完成其中的一些步骤，其余部分留作练习。

    \begin{itemize}
        \item 证明 $R_1$ 具有反对称性：设 $X, Y \in \mathcal{P}(S)$ 并假设 $(X,Y) \in R_1$ 且 $(Y,X) \in R_1$。这意味着 $X \subseteq Y$ 且 $Y \subseteq X$，因此，根据集合的基本性质可得 $X=Y$。
        \item 证明 $R_1$ 不是全序：考虑 $X = {1} \subseteq S$ 且 $Y = {2, 3} \subseteq S$。不难发现 $X \nsubseteq Y$ 且 $Y \nsubseteq X$。因此 $(X,Y) \notin R_1$ 且 $(Y,X) \notin R_1$。也就是说，在该关系下，$X$ 和 $Y$ 是\emph{不可比较的}。
    \end{itemize}
\end{example}

这种关系将整个集合 $\mathcal{P}(S)$ 分成若干\emph{链}，这些链在自身内部是有序的，但不同链之间的元素可能无法比较。例如，以下是 $\mathcal{P}(S)$ 的一些子集：
    \begin{align*}
        A_1 &= \big\{\varnothing, \{1\} , \{1, 2\} , \{1, 2, 3\}\big\} \\
        A_2 &= \big\{\varnothing, \{1\} , \{1, 3\} , \{1, 2, 3\}\big\} \\
	    A_3 &= \big\{\varnothing, \{2\} , \{1, 2\} , \{1, 2, 3\}\big\} \\
        A_4 &= \big\{\{3\} , \{2, 3\}\big\}
    \end{align*}
这些集合不是不相交的，所以它们并不构成 $\mathcal{P}(S)$ 的\emph{划分}。不过要注意，$R_1$ 在每个子集内确实\emph{构成全序}。这里``构成''的意思是我们使用相同的 $R_1$ 定义属性，但将定义域限制在特定的集合 $A_1$ 上，而不是整个 $\mathcal{P}(S)$ 上。当然，我们还可以定义更多的集合，这些集合在这种关系下形成链结构。\\

让我们先形式化这个概念，然后继续我们的例子。\\

\begin{definition}
    设 $(A, R)$ 为偏序集，且令 $B \subseteq A$。令 $\hat{R}$ 表示由关系 $R$ 在集合 $B$ 上构成的关系；也就是说，我们定义
    \[\forall x, y \in A \centerdot (x, y) \in \hat{R} \iff [x, y \in B \land (x, y) \in R]\]
    如果 $(B, \hat{R})$ 为全序集，则我们称 $B$ 是（$R$ 下）$A$ 的\dotuline{链}。
\end{definition}

根据这个定义，我们可以看到 $A_1, A_2, A_3, A_4$ 是 $R_1$ 下 $\mathcal{P}(S)$ 的链。现在，尝试证明 $R_2$ 是一个严格偏序关系，并写出一些 $R_2$ 关系下 $\mathcal{P}(S)$ 的链。然后，比较一下它们与 $R_1$ 关系下 $\mathcal{P}(S)$ 的链有何不同。

在下一小节中，我们将探讨链的重要性。具体来说，我们会研究偏序、链和全序的特殊性质，这些性质可以帮助我们找到子集中的``最小''和``最大''元素。

在继续之前，我们先来看两个有关偏序的例子。\\

\begin{example}
    考虑 $\mathbb{R} \times \mathbb{R}$ 集合。我们通过确立一组实数对与另一组实数对的关联来定义 $\mathbb{R} \times \mathbb{R}$ 上的关系 $R$。具体来说，就是
    \[\big((u, v),(x, y)\big) \in R \iff [u \le x \land v \le y]\]
    可以证明 $R$ 是 $\mathbb{R} \times \mathbb{R}$ 上的偏序关系。我们将证明其传递性，其余部分留作练习：
\end{example}

\begin{proof}
    设 $(u, v),(x, y),(z, w) \in \mathbb{R} \times \mathbb{R}$。假设 $\big((u, v),(x, y)\big) \in R$ 且 $\big((x, y),(z, w)\big) \in R$。这意味着 $u \le x$ 且 $x \le z$，所以 $u \le z$；同理，这也意味着 $v \le y$ 且 $y \le w$，所以 $v \le w$。因此 $\big((u, v),(z, w)\big) \in R$，这表明 $R$ 具有传递性。
\end{proof}

提示：要证明 $R$ 不是\emph{全序}关系，我们需要找到一个反例。也就是说，我们要找到一对 $(x, y)$ 和 $(u, v)$，使得它们既不满足 $\big((x, y),(u, v)\big) \in R$，也不满足 $\big((u, v),(x, y)\big) \in R$。可以通过几何方式来思考这个关系，找出这样的例子。

想一想在这个关系下的链会是什么样子。试着用几何方法描述它们，并画出几个代表性图形。\\

\begin{example}
    设 $A$ 为 $26$ 个英文字母。并设 $W$ 为所有由 $A$ 中字母组成的\emph{有限}字符串的集合。也就是说，$W$ 是所有可能的``单词''的集合，我们允许任意字母组合都可以包含在我们的``字典''中。让我们尝试定义 $L$，即 $W$ 上的标准\emph{字典}顺序。将 $A$ 表示为集合 $[26]$ 会有所帮助，其中 $a = 1, b = 2$，依此类推，直到 $z = 26$。然后，我们说单词 $w \in W$ 表示为
    \[w = (w_1, w_2, \dots , w_n) \;\text{其中}\; n \in \mathbb{N} \;\text{且}\; \forall i \in [n] \centerdot w_i \in A\]
    注意，对于任意两个单词 $v, w \in W$，我们都可以从左到右逐个字母地比较它们，直到找到它们之间的差异。无论差异出现在何处，我们都根据这两个字母的比较对这两个单词进行排序。如果一个单词比另一个单词长，且较短单词的字母与较长单词字母的前半部分相同，我们希望将较短单词排在较长单词之前，就像字典中``there''排在``therefore''之前一样。
    \[(v, w) \in L \iff \;\text{在}\; v_i \ne w_i \;\text{的最小索引}\; i \;\text{处,我们有} v_i < w_i \;\text{（且将空格视为 27）}\]
    想一想为什么这对应于字典中单词的常规排序。（你能用更严格的数学符号定义这个关系吗？试试看！）
\end{example}

现在我们已经看过了几个顺序关系的例子，我们建议你尝试做几个习题来练习识别这些关系并证明它们的性质。在那之后，我们可以继续讨论顺序关系的许多其他有趣且有用的性质！

\input{part2/ch06/s3-order-relations/ss1-questions-and-exercises}