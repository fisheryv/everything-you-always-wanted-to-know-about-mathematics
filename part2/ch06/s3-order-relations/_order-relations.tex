% !TeX root = ../../../book.tex
\section[顺序关系]{[选学]顺序关系}\label{sec:section6.3}

本节将探讨一类具有特定性质的关系，其性质类似于``$\le$''。这类关系在常见数集（如 $\mathbb{N}, \mathbb{Z}, \mathbb{Q}, \mathbb{R}$）中均有明确定义，且适用于其他一些出人意料的场景。我们将首先给出定义，随后通过实例阐释这些概念。基于这些例子，我们将引出顺序关系的重要性质，并进行严格表述与证明。

\begin{definition}
    设 $R$ 为定义在集合 $A$ 上的关系。

    \begin{itemize}
        \item 若 $R$ 具有自反性、传递性和反对称性，则称 $R$ 为集合 $A$ 上的\dotuline{偏序关系 (Partial Order)}。
        \item 若 $R$ 具有自反性、传递性和反对称性，同时还满足
        \[\forall x, y \in A \centerdot (x, y) \in R \lor (y, x) \in R\]
        则称 $R$ 为集合 $A$ 上的\dotuline{全序关系 (Total Order)}。（也就是说，全序关系是一种偏序关系，其中集合中的任意两个元素都可以相互比较。）
    \end{itemize}
\end{definition}

上述定义明确了偏序与全序的概念。下面的定义将引入描述偏序集与全序集的简写记号。

\begin{definition}
    当 $R$ 为集合 $A$ 上的偏序关系时，则称有序对 $(A, R)$ 为\dotuline{偏序集}，有时简写为 \dotuline{poset}。

    当 $R$ 为集合 $A$ 上的全序关系时，则称有序对 $(A, R)$ 为\dotuline{全序集}，有时简写为 \dotuline{toset}。
\end{definition}

我们将尝试通过几个相关例子来解释这些术语的含义。

\begin{example} \label{ex:example6.3.3}
    定义 $\mathbb{R}$ 上的如下四个关系：
    \begin{align*}
        (x, y) \in R_1 &\iff x \le y \\
        (x, y) \in R_2 &\iff x < y \\
        (x, y) \in R_3 &\iff x = y \\
        (x, y) \in R_4 &\iff \lfloor x \rfloor = \lfloor y \rfloor
    \end{align*}
    （请记住，$\lfloor x \rfloor = \max\{a \in \mathbb{Z} \mid a \le x\}$ 表示对实数``向下取整''；即不超过 $x$ 的最大整数。）

    这些关系中哪些是偏序关系？哪些是全序关系？抑或既不是偏序关系也不是全序关系？请花几分钟时间独立思考，并尝试勾勒证明思路，或向他人阐述观点。

    我们的结论如下：$R_1$ 与 $R_3$ 是偏序关系，但只有 $R_1$ 为全序关系；$R_2$ 和 $R_4$ 既不是偏序关系也不是全序关系（因为 $R_2$ 不满足自反性，$R_4$ 不满足反对称性）。序关系（无论偏序或全序）的核心在于提供集合元素的\emph{比较}与\emph{排序}机制。简而言之，偏序关系在集合中形成若干条可比较的``链''（类似数轴上的线段）；而全序关系则构成贯穿所有元素的单一``链''。
\end{example}

你可能会认为 $R_2$ 仍然具有某种``顺序''特性，这种观点是有道理的。$R_2$ 和 $R_1$ 的唯一区别在于 $R_2$ 不允许元素相等；换句话说，``$\le$''的定义包含了``或等于''，而``$<$''的定义则没有。这使得 $R_2$ 不具有自反性，仅此而已。你可能还会注意到，关系 $R_4$ 与 $R_1$ 没有这种相似性，它似乎是不同的（我们将在后文详细讨论）。这引出了以下定义，其中偏序或全序关系可以``放宽''到严格顺序。

\begin{definition}
    设 $A$ 为集合，$R$ 为 $A$ 上的关系。我们称 $R$ 具有\dotuline{非自反性}当且仅当
    \[\forall x \in A \centerdot (x, x) \notin R\]
\end{definition}

请注意，这与单纯的``不具自反性''不同。考虑量词：自反性要求每个元素都与自身相关，因此其否定表示存在至少一个元素不与自身相关；而非自反性则要求每个元素都不与自身相关。

\begin{definition}
    设 $A$ 为集合，$R$ 为 $A$ 上的关系。
    
    若 $R$ 具有非自反性、传递性和反对称性，则称 $R$ 为\dotuline{严格偏序}。

    若 $R$ 具有非自反性、传递性和反对称性，同时还满足
    \[\forall x, y \in A \centerdot x \ne y \implies [(x, y) \in R \lor (y, x) \in R]\]
    则称 $R$ 为\dotuline{严格全序}。
\end{definition}

你可能会好奇这与非严格顺序的关系。事实上，我们有一种自然的方法在顺序关系和严格顺序关系间转换：通过添加或移除元素与自身的关系。下面的引理总结了这一转换，并证明严格顺序和非严格顺序的数量相同。

\begin{lemma}
    设 $(A, R_1)$ 为偏序集。关系 $S_1$ 定义为
    \[(x, y) \in S_1 \iff [(x, y) \in R_1 \land x \ne y]\]
    是 $A$ 上的严格偏序。
\end{lemma}
\begin{lemma}
    设 $(A, R_2)$ 为全序集。关系 $S_2$ 定义为
    \[(x, y) \in S_1 \iff [(x, y) \in R_2 \land x \ne y]\]
    是 $A$ 上的严格全序。
\end{lemma}
\begin{lemma}
    设 $(A, S_3)$ 为严格偏序集。关系 $R_3$ 定义为
    \[(x, y) \in R_3 \iff [(x, y) \in S_3 \lor x = y]\]
    是 $A$ 上的（不严格）偏序。
\end{lemma}
\begin{lemma}
    设 $(A, S_4)$ 为严格全序集。关系 $R_4$ 定义为
    \[(x, y) \in R_4 \iff [(x, y) \in S_4 \lor x = y]\]
    是 $A$ 上的（不严格）全序。
\end{lemma}

回想一下 $\mathbb{R}$ 上定义的关系 $R_1$ 和 $R_2$。将``少于''定义为``少于或等于且不等于''可能显得奇怪且啰嗦。然而，这只是我们描述``$\le$''的语言方式造成的。从数学角度看，先讨论自反关系、偏序与全序，再将其转化为严格序更为自然。稍后在讨论最小元素时我们会看到，自反性是一个良好性质，这解释了为何通常从偏序出发，再修改定义引入严格序，而非反之。现在只需注意，$R_2$ 是对应于全序 $R_1$ 的严格全序。

问题：是否存在对应于偏序 $R_3$ 的严格偏序？若存在，它是什么？若不存在，原因何在？

关系 $R_4$ 既非严格序也非其他序关系。但需注意，$R_4$ 将 $\mathbb{R}$ 的元素有效地``划分''为若干类。本质上，在此关系下，所有满足 $1 \le y < 2$ 的实数 $y$ 均被视为``等同的''，满足 $2 \le y < 3$ 的 $y$ 亦是如此，满足 $-5 \le y < -4$ 的 $y$ 亦然。完成划分后，我们可以为这些类赋予顺序，但 $R_4$ 本身并不包含顺序信息，需要额外施加顺序结构。正因如此，$R_4$ 不属于任何序关系。然而，凭借其将集合元素划分为等价类的特性，我们称之为``\emph{等价关系}''——这是下一节将探讨的概念。建立这些等价类后，便可比较并排序它们。

最后，让我们在 $\mathbb{R}$ 之外的语境中考察若干示例，其中一个是偏序的标准范例。

\begin{example}
    设 $S=[3]$，考虑幂集 $\mathcal{P}(S)$。（集合 $S$ 的幂集是 $S$ 所有子集的集合）在上 $\mathcal{P}(S)$ 定义如下关系，其中 $X, Y \subseteq S$：
    \begin{align*}
        (X, Y) \in R_1 &\iff X \subseteq Y \\
        (X, Y) \in R_2 &\iff X \subset Y \\
        (X, Y) \in R_3 &\iff X \cap Y = \varnothing \\
        (X, Y) \in R_4 &\iff X \Delta Y = S
    \end{align*}
    回忆一下，$X \Delta Y$ 是集合 $X$ 和 $Y$ 的\emph{对称差} (Symmetric Difference)，其定义为
    \[X \Delta Y = (X - Y) \cup (Y - X) = (X \cup Y) - (X \cap Y)\]

    我们声称 $R_1$ 是偏序关系但不是全序关系。在证明该结论之前，先来思考一个更具挑战的问题：能否在 $\mathcal{P}(S)$ 上定义一个全序关系吗？能否以可推广到 $S = [n]$ 的方式来定义该全序关系，其中 $n$ 为任意自然数 $n \in \mathbb{N}$。

    现在，为了证明 $R_1$ 是偏序关系，我们必须证明它具备自反性、传递性和反对称性。为了证明它不是全序关系，我们还需证明它不满足所有元素都可比较这一附加条件。我们将完成其中的一些步骤，其余部分留作练习。

    \begin{itemize}
        \item 证明 $R_1$ 具有反对称性：设 $X, Y \in \mathcal{P}(S)$ 并假设 $(X,Y) \in R_1$ 且 $(Y,X) \in R_1$。这意味着 $X \subseteq Y$ 且 $Y \subseteq X$，因此，根据集合的基本性质可得 $X=Y$。
        \item 证明 $R_1$ 不是全序：考虑 $X = {1} \subseteq S$ 且 $Y = {2, 3} \subseteq S$。不难发现 $X \nsubseteq Y$ 且 $Y \nsubseteq X$。因此 $(X,Y) \notin R_1$ 且 $(Y,X) \notin R_1$。也就是说，在该关系下，$X$ 与 $Y$ \emph{不可比较}。
    \end{itemize}
\end{example}

这种关系将整个集合 $\mathcal{P}(S)$ 划分为若干个\emph{链}，这些链在自身内部是有序的，但不同链之间的元素可能无法比较。例如，以下是 $\mathcal{P}(S)$ 的一些子集：
    \begin{align*}
        A_1 &= \left\{\varnothing, \{1\} , \{1, 2\} , \{1, 2, 3\}\right\} \\
        A_2 &= \left\{\varnothing, \{1\} , \{1, 3\} , \{1, 2, 3\}\right\} \\
	    A_3 &= \left\{\varnothing, \{2\} , \{1, 2\} , \{1, 2, 3\}\right\} \\
        A_4 &= \left\{\{3\} , \{2, 3\}\right\}
    \end{align*}
这些子集并非两两不相交，所以它们并不构成 $\mathcal{P}(S)$ 的\emph{划分}。不过要注意，$R_1$ 在每个子集内确实\emph{构成全序}。此处``构成''指沿用 $R_1$ 的定义，仅将其定义域限制在特定集合 $A_1$ 上，而非整个 $\mathcal{P}(S)$ 上。当然，我们还可以定义更多此类在 $R_1$ 下形成链的集合。

我们先将此概念形式化，再继续讨论。

\begin{definition}
    设 $(A, R)$ 为偏序集，且 $B \subseteq A$。设 $\hat{R}$ 表示关系 $R$ 在集合 $B$ 上构成的关系；也就是说，我们定义
    \[\forall x, y \in A \centerdot (x, y) \in \hat{R} \iff [x, y \in B \land (x, y) \in R]\]
    若 $(B, \hat{R})$ 为全序集，则称 $B$ 是（$R$ 下）$A$ 的\dotuline{链}。
\end{definition}

由定义可知，$A_1, A_2, A_3, A_4$ 均为 $R_1$ 下 $\mathcal{P}(S)$ 的链。请尝试证明 $R_2$ 是严格偏序关系，并列举 $R_2$ 下 $\mathcal{P}(S)$ 的一些链，比较它们与 $R_1$ 下链的差异。

在下一小节中，我们将探讨链的重要性。具体来说，我们会研究偏序、链和全序的特殊性质，这些性质可以帮助我们找到子集中的``最小''和``最大''元素。

在继续之前，我们先来看两个有关偏序的例子。

\begin{example}
    考虑 $\mathbb{R} \times \mathbb{R}$ 集合。我们通过确立一组实数对与另一组实数对之间的关系，在 $\mathbb{R} \times \mathbb{R}$ 上的定义关系 $R$。具体来说，
    \[\left((u, v),(x, y)\right) \in R \iff [u \le x \land v \le y]\]
    可以证明 $R$ 是 $\mathbb{R} \times \mathbb{R}$ 上的偏序关系。我们将证明其传递性，其余部分留作练习。
    \begin{proof}
        设 $(u, v),(x, y),(z, w) \in \mathbb{R} \times \mathbb{R}$。假设 $\left((u, v),(x, y)\right) \in R$ 且 $\left((x, y),(z, w)\right) \in R$。这意味着 $u \le x$ 且 $x \le z$，所以 $u \le z$；同理，$v \le y$ 且 $y \le w$，所以 $v \le w$。因此 $\left((u, v),(z, w)\right) \in R$，这表明 $R$ 具有传递性。
    \end{proof}
    提示：要证明 $R$ 不是\emph{全序}关系，我们需要找到一个反例。也就是说，我们要找到一对 $(x, y)$ 和 $(u, v)$，使得它们既不满足 $\left((x, y),(u, v)\right) \in R$，也不满足 $\left((u, v),(x, y)\right) \in R$。可以通过几何方式来思考这个关系，找出这样的反例。

    请思考此关系下的链会是什么样子？试着用几何方法描述它们，并画出几个代表性图形。
\end{example}

\begin{example}
    设 $A$ 为 $26$ 个英文字母的集合，$W$ 为所有由 $A$ 中字母组成的\emph{有限}字符串的集合。也就是说，$W$ 是所有可能的``单词''的集合，我们允许任意字母组合出现在``字典''中。让我们尝试定义 $L$，即 $W$ 上的标准\emph{字典}顺序。将 $A$ 表示为集合 $[26]$ 会有所帮助，其中 $a = 1, b = 2$，依此类推，直到 $z = 26$。然后，单词 $w \in W$ 可表示为
    \[w = (w_1, w_2, \dots , w_n) \;\text{其中}\; n \in \mathbb{N} \;\text{且}\; \forall i \in [n] \centerdot w_i \in A\]
    注意，对于任意两个单词 $v, w \in W$，我们都可以从左到右逐个字母比较它们，直到找到第一个不同之处。无论差异出现在哪个位置，我们都根据该位置的两个字母的比较结果对单词进行排序。如果一个单词比另一个单词长，且较短单词的字母与较长单词的前半部分相同，那么将较短单词排在较长单词之前，就像字典中``there''排在``therefore''之前一样。
    \[(v, w) \in L \iff \text{\ 在\ } v_i \ne w_i \text{\ 的最小索引\ } i \text{\ 处,我们有\ } v_i < w_i \text{\ （且将空格视为\ } 27 \text{\ ）}\]
    想一想为什么这对应于字典中单词的常规排序。（你能用更严格的数学符号定义这个关系吗？试试看！）
\end{example}

现在我们已经了解了几个顺序关系的例子，建议你尝试做一些习题来练习识别这些关系并证明它们的性质。之后，我们可以继续讨论顺序关系的其他有趣且有用的性质！

\input{part2/ch06/s3-order-relations/ss1-questions-and-exercises}