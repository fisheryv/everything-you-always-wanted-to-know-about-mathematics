% !TeX root = ../../../book.tex

\subsection{标准计数对象}

我们在前一节已经讨论了几种标准的组合对象。然而，在``双法计数''证明中，难点在于确定要计数的对象！这些练习通常是这样提出的：``这是一个恒等式；请用双法计数来证明它。''这种说法并没有告诉你具体要计数什么，只是告诉你需要计数某些东西！在这个简短的章节中，我们将尽力提供一个实用的指南，帮助你``解开''组合恒等式，并构建一个双法计数证明。这些思路基于我们的经验以及一些组合学家常用的标准论证。

\subsubsection*{二项式系数的多种解释}

这些对象和相应的计数公式在前一节已经讨论过了。如果有不熟悉的部分，建议你重读上一节。这里我们要强调的是如何\emph{识别}某个计数对象是否与计数问题相关。例如，回想一下``Chairperson 恒等式''：
\[k\begin{pmatrix}n\\k\end{pmatrix} = n\begin{pmatrix}n-1\\k-1\end{pmatrix}\]
假装我们还没有证明它。这个恒等式只包含二项式系数的乘积（记住我们总是可以将 $k$ 写成 $\big({k \atop 1}\big)$ ），这意味着我们应该尝试计数一些可以通过简单的二项式系数描述的东西。最自然的选择是 $[n]$ 的子集；或者，我们可以考虑从一群人中选择一定大小的委员会，或者是包含 $k$ 个 \verb|1| 的二进制 $n$-元组。这三种选择中的任何一种都可以让我们轻松描述表达式中的各个项，并将它们联系起来。接下来，我们需要选择一种我们最熟悉的解释方式，即最容易解释所有项的方法。

如果我们选择使用选人组建委员会的方法，那么我们可以遵循之前证明中的论证。如果我们选择 $[n]$ 的子集，那么我们需要设计一个合理的两步过程来描述恒等式两边各项的乘积。在选择大小为 $k$ 的子集之后，右边的 $\big({n \atop 1}\big)$ 项可能表示我们先选出一个``特殊''元素，然后再填充子集的其他元素。然而，当我们讨论的是 $[n]$ 的子集时，就不能再使用``委员会主席''这样的术语了。（这就是为什么我们认为委员会的解释更合理且易于使用。只需为每个人编号，然后我们就可以放心地使用这些术语。）通常的解释可能是``圈出''一个元素，表明它是特殊元素。也就是说，方程两边都在计数大小为 $k$ 的 $[n]$ 的子集，其中一个元素被圈出。在左边，我们先选择子集然后圈出这个特殊元素；在右边，我们先圈出这个特殊元素并将其包括在子集中，然后再填充子集的其余元素。还有其他简单易懂的方法来解释这个论证，但我们想强调的是，除非从一开始就选择这种设置，否则``委员会''的术语不适用。（挑战性问题：你会如何在二进制 $n$-元组的背景下处理这个证明？提示：考虑允许某个``特殊''位置由某个固定符号填充，而不是选择 \verb|0| 或 \verb|1|。）

在数学中，我们经常会遇到二项式系数相乘的情况，并且往往``顶部系数''是相同的。例如，在双法计数证明的背景下，考虑如何描述如下项。（假设这只是等式的一边；另一边在这里不重要。）
\[\begin{pmatrix}n\\k\end{pmatrix}\begin{pmatrix}n\\\ell\end{pmatrix}\]
描述这种类型的乘积有两种合理的方法，选择哪一种取决于等式的另一边或其他相关项。我们将在这里介绍两种解释，并通过上下文来帮助你确定使用哪一种。

假设在委员会的背景下，每一项代表从 $n$ 个人中选择一个特定大小的委员会 ( $k$ 或 $\ell$) 。一种解释是从同一组 $n$ 个人中选择两个委员会。比如，一个部门有 $n$ 名教授，我们需要选择 $k$ 名教授来监督预算，再选择 $\ell$ 名教授来监督课程，而且教授们可能同时在两个委员会中任职。另一种解释是从不同的人群中选择两个委员会，但每组人群的大小都是 $n$ 。比如，一个班级有 $n$ 名男生和 $n$ 名女生，我们想从中选择 $k$ 名男生和 $\ell$ 名女生组成一个俱乐部。两种解释都是``正确的''，但具体选择哪种取决于问题的具体情况。

委员会类型的论证中，一个有用的概念是小委员会 (subcommittee) 的概念。由于从 $n$ 个人中选择 $k$ 个人组成的委员会已经代表了一个子集，所以小委员会实际上代表了一个子集的子集。因此，如果我们在一个等式中发现诸如
\[\begin{pmatrix}a\\b\end{pmatrix}\begin{pmatrix}b\\c\end{pmatrix}\]
这样的表达，我们可能会选择将其解释为从总人数为 $a$ 的人群中选择 $b$ 个人组成一个委员会，然后从这 $b$ 个人中选择 $c$ 个人组成一个小委员会。这可以描述为成立一个俱乐部并选出其官员，或组建一支运动队并确定首发阵容，或其他诸如此类的事情。

\subsubsection*{指数与过程}

除了二项式系数，在组合恒等式中经常出现的还有指数项，例如 $n^3, 2^n, n^{k-1}$ 等等。通常，这些项的解释会根据恒等式中其他项的上下文来确定。我们在这里介绍几种标准的、常见的和容易理解的解释方法。有趣的是，解释有时会取决于底数和指数哪个数更大！

考虑诸如这样的项
\[\begin{pmatrix}n\\k\end{pmatrix}2^k\]
假设我们根据恒等式的其余部分，将问题解释为``委员会''问题，并声明二项式系数 $\big({n \atop 1}\big)$ 代表从 $n$ 名学生中选出 $k$ 人组成一个委员会。那么 $2^k$ 项代表什么呢？记住，这个项可能来自一个 $k$-步过程，每一步都有两种选择。因为 $k$ 是委员会的大小，我们可以简单地将其描述为对每个成员的 $2$-步决策过程。例如，我们可以给每个成员分配一顶红帽子或蓝帽子；或者选择是否给每个成员一颗金星；或者让每个成员选择成为共和党人或民主党人。你可以自由发挥创造力！当然，所选择的解释必须与恒等式的其余部分相符，因此有时一种解释比另一种更容易理解。记住这一点，如果发现难以表达你的想法，要主动回过头修改你的解释。

再来考虑诸如这样的项
\[\begin{pmatrix}n\\k\end{pmatrix}2^n\]
假设我们还是将问题解释为``委员会''问题。这种情况与之前有什么不同呢？在这里，指数与二项式系数的``顶项''相同。因此，委员会的选择不一定与后续的 $n$-步过程相关。这可能意味着从一个有 $n$ 个学生的班级中选出 $k$ 个班干部，然后将每个学生分配到 $A$ 组或 $B$ 组（不考虑班干部的分配）。如果我们不采用``委员会''解释，这个项可能描述的是一个二进制 $n$-元组，其中恰好有 $k$ 个 \verb|1|，并且某些 \verb|0| 和 \verb|1| 被圈了起来。具体用哪种方法解释取决于问题的具体情况，以及你对这些解释的熟悉程度。

考虑当数字发生些许修改后如何解释这些项。例如
\[\begin{pmatrix}n\\k\end{pmatrix}4^n\]
可以解释为一个具有 $k$ 个成员的委员会，每个成员戴着红色、蓝色、绿色或黄色的帽子。例如
\[\begin{pmatrix}n\\k\end{pmatrix}5^n\]
可以解释为一个二进制 $n$-元组，其中恰好有 $k$ 个 \verb|1|，且每个 \verb|0| 和 \verb|1| 周围都有 $1$ 到 $5$ 个圈。

接下来，让我们探讨一些底数为变量而指数为定值的表达式。例如，考虑诸如这样的项
\[\begin{pmatrix}n\\k\end{pmatrix}2^k\]
在这里，我们从 $n$ 个对象中选择 $k$ 个对象，并进行一个每步有 $k$ 个选择的两步过程。也就是说，选择这 $k$ 个对象会影响后续的两步过程的结果。如果我们使用``委员会''进行解释，可以将其看作是先选出一个具有 $k$ 个人的委员会，然后从中选出两名官员 --- 比如一个发言人和一个财务官 --- 委员会中的任何人都可以担任这两个职位，甚至可以同时担任两个职位。

如果我们使用``元组''进行解释，可以将其描述为选择一个具有 $k$ 个 \verb|1| 的二进制 $n$-元组，其中一个 \verb|1| 被圈起来，另一个 \verb|1| 被框起来（也可能同一个 \verb|1| 既被圈也被框）。我们还可以使用``字母表''进行解释，从 $n$ 个字母中选择 $k$ 个字母，然后用这 $k$ 个字母组成两个字母的单词。思考这三种解释为什么都有效及其相互关系。尝试用这些解释来重写其中一个证明，并考虑当 $k^3$ 或 $k^4$ 时这些解释会有什么不同。

最后，考虑诸如这样的项
\[\begin{pmatrix}n\\k\end{pmatrix}n^3\]
在``委员会''的上下文下。由于指数项的底数与二项式系数的顶项相同，因此 $\big({n \atop k}\big)$ 项所代表的委员会与随后的三步过程之间不一定存在联系。因此，我们可以解释为选择一个 $k$ 人委员会，然后分配一条红色、一条蓝色和一条绿色丝带，其中一个人可能会收到多条丝带，任何人（无论是否在委员会内）都可能收到一条或多条丝带。用``二进制 $n$-元组''来解释该项留给你来完成。试试看吧！

\subsubsection*{求和即划分}

组合恒等式中常常会出现\emph{求和}。在双法计数证明中，处理这一点会稍微有些复杂，因为求和代表了一次多个项。不过，最重要的规则是：求和总是代表一个\emph{划分}。特别是，这个划分告诉我们所有划分集的基数。为了在双法计数证明中解释这一点，我们需要描述以下三个性质：
\begin{itemize}
    \item 划分集是什么。
    \item 为什么求和的索引\emph{限制}在上下文中是合理的。
    \item 对于任意索引，为什么对应集合的大小是求和中的项。
\end{itemize}
我们将通过一个例子来说明这些。\\

\begin{example}[支持/反对委员会恒等式]
    \[\begin{pmatrix}n\\k\end{pmatrix}2^{n-k} = \sum_{i=k}^{n}\begin{pmatrix}n\\i\end{pmatrix}\begin{pmatrix}k\\i\end{pmatrix}\]

    \begin{questions}{直觉：}
        从 $n$ 个人中选出一个由 $k$ 人组成的委员会。然后，确定那些没有进入委员会的人是否支持委员会的决定。我们也可以先选择至少 $k$ 个将会在委员会内或支持委员会的人，并将其他人设定为退出和反对委员会的人。然后，从这些人中再选出 $k$ 个人实际进入委员会，并将其余人设定为支持委员会的决定。（注意：在这些步骤中，详细说明我们将执行的每一步是非常重要的。不要假设读者会理所当然地理解这些步骤。）
    \end{questions}

    \begin{proof}
        假设有 $n$ 个人。设 $S$ 为从这 $n$ 个人中选择 $k$ 个人组成委员会的所有可能方式的集合，而每个不在委员会中的人都对委员会持有明确\textbf{支持}或\textbf{反对}态度。

        首先，我们可以通过多个步骤来得到 $|S|$：
        \begin{itemize}
            \item 从 $n$ 个人中选择 $k$ 个人组成一个委员会：有 $\big({n \atop k}\big)$ 种方法。
            \item 对于其余 $n-k$ 人，让他们每个人决定是\verb|支持|还是\verb|反对|委员会。这个过程有 $n-k$ 步，每步两个选择。所以根据乘法原理：有 $2^{n-k}$ 种方法。
        \end{itemize}
        根据乘法原理，我们得到 $|S| = \big({n \atop k}\big) \cdot 2^{n-k}$。

        其次，我们可以通过划分不同人数的支持者来确定 $|S|$ 的大小。根据 $S$ 的定义，从没有到所有 $n-k$ 个非委员会成员都\verb|支持|委员会。这样一来，委员会成员和他们的支持者总人数可以在 $k$ （含）到 $k + (n - k) = n$ （含）之间。

        对于每个满足 $k \ge i \ge n$ 条件的 $i$，令 $S_i \subseteq S$ 表示包含 $k$ 个委员会成员和 $i - k$ 个支持者的集合。 （注意 $0 \ge i - k \ge n - k$，这与之前提到的限制一致。）

        请注意，$\{S_i \mid k \ge i \ge n\}$ 是 $S$ 的一个划分。这是因为，$S$ 中的每个元素都可以通过其支持委员会的成员数量来表征，并且这个数量是一个特定值。现在，我们可以通过多步骤过程来找到每个 $i$ 对应的 $|S_i|$：
        \begin{itemize}
            \item 从所有 $n$ 个人种选择 $i$ 个人，其中包含潜在的委员会候选人：有 $\big({n \atop i}\big)$ 种方法。
            \item 指定其他 $n - i$ 个人明确反对我们组建的委员会。\\
                  （这一步是确定的，因此只有一种方法，但我们需要指出这一点，以便完整描述作其是 $S$ 中的元素这一结果。）
            \item 对于第一步选出的 $i$ 个人，从中选出 $k$ 个作为委员会成员：有 $\big({i \atop k}\big)$ 种方法。
            \item 将上一步中未被选中的 $i - k$ 个人指定为委员会的支持者，但他们不是委员会成员。\\
                  （再次强调，这里只有一种方法，但对结果进行完整描述需要我们明确指出这些成员的态度和状态。）
        \end{itemize}
        根据乘法原理，我们得到 $|S_i| = \big({n \atop i}\big)\big({i \atop k}\big)$。\\
        根据加法原理，我们得到 $|S| = \sum_{i=k}^{n} |S_i| = \sum_{i=k}^{n}\big({n \atop i}\big)\big({i \atop k}\big)$。\\
        由于我们通过两种方法得到了 $|S|$，我们可以将它们建立起相等关系。这证明了这一结论。
    \end{proof}
\end{example}

请注意，在我们的证明中，在明确划分之后，我们做了几件事。首先，我们解释了为什么这是一个划分。接着，我们说明了它如何与求和中的索引相关联。然后，我们解释了求和的上下限是如何对应这个划分并涵盖所有可能情况的。最后，对于任意 $i$，我们解释了为什么 $|S_i|$ 是求和中的相应项。