% !TeX root = ../../../book.tex

\subsection{不可数集}

为了开始讨论不可数集，让我们证明一个之前提到过的结果。具体来说，我们将证明集合的可数无限次\emph{笛卡尔积}是不可数无限的。注意，我们甚至不需要这些集合是无限集：我们可以让它们都是大小为 $2$ 的有限集！在下一部分，我们将用这个结果展示一些不可数集的例子，包括一个我们已经熟悉的集合……

\subsubsection*{不可数笛卡尔积}

\begin{theorem}
    双元素集合的可数无限次笛卡尔积是不可数无限的。也就是说
    \[\{0, 1\}^{\mathbb{N}} = \{0, 1\} \times \{0, 1\} \times \{0, 1\} \times \dots\]
    是不可数无限集。
\end{theorem}

\begin{proof}
    为了引出矛盾而假设 $\{0, 1\}^{\mathbb{N}}$ 是可数无限集。这意味着我们可以找到该集合和 $\mathbb{N}$ 之间的双射。也就是说，我们可以将该集合中的所有元素与自然数一一对应起来。因此，这个集合有第一个元素，对应于自然数 $1$；有第二个元素，对应于自然数 $2$；依此类推。

    虽然我们并不确切知道这些元素具体是什么，但可以确定这种对应关系确实存在。我们可以将 $\{0, 1\}^{\mathbb{N}}$ 的所有元素 $y_i$ 列出来。每个 $y_i$ 是一个由 $0$ 和 $1$ 组成的有序无限列表，因此可以这样表示：
    \begin{align*}
        1 & \leftrightarrow (a_{1,1} , a_{1,2} , a_{1,3} , a_{1,4} , a_{1,5} , \dots) = y_1 \\
        2 & \leftrightarrow (a_{2,1} , a_{2,2} , a_{2,3} , a_{2,4} , a_{2,5} , \dots) = y_2 \\
        3 & \leftrightarrow (a_{3,1} , a_{3,2} , a_{3,3} , a_{3,4} , a_{3,5} , \dots) = y_3 \\
        4 & \leftrightarrow (a_{4,1} , a_{4,2} , a_{4,3} , a_{4,4} , a_{4,5} , \dots) = y_4 \\
        5 & \leftrightarrow (a_{5,1} , a_{5,2} , a_{5,3} , a_{5,4} , a_{5,5} , \dots) = y_5 \\
          & \vdots
    \end{align*}
    每个值 $a_{i,j}$ 要么是 $0$，要么是 $1$。$i$ 表示我们对应的是哪个自然数（也就是列表中的\emph{垂直}位置），而 $j$ 则表示我们在哪个坐标（也就是列表中的\emph{水平}位置）。

    因为我们假设这个对应关系是双射，所以这个列表包含了 $\{0, 1\}^{\mathbb{N}}$ 的所有元素。为了完成反证法，我们将构造一个 $\{0, 1\}^{\mathbb{N}}$ 的元素，并确保它\textbf{不会}出现在这个列表中！（这就是康托对角线论证的一种形式。）

    我们定义对象 $x = (x_1, x_2, x_3, \dots)$ 为
    \[x_i = \begin{cases}
            0 & \text{如果}\; a_{i,i} = 1 \\
            1 & \text{如果}\; a_{i,i} = 0
        \end{cases}\]
    也就是说，我们通过沿着元素矩阵的\emph{主对角线}向下构建 $x$（这样我们可以看到所有的元素 $a_{i,i}$），并将值从 $1$ \emph{切换为} $0$，或从 $0$ 切换为 $1$。

    下图是一个\emph{具体示例}，展示了如何执行这个操作，虽然它不是一般性证明的一部分，但为了更好地说明，我们将其包含在内：
    \begin{align*}
        1 & \leftrightarrow (\circled{1} , 1 , 0 , 0 , 1 , \dots) = y_1                        \\
        2 & \leftrightarrow (1 , \circled{0} , 0 , 0 , 1 , \dots) = y_2                        \\
        3 & \leftrightarrow (0 , 0 , \circled{1} , 1 , 0 , \dots) = y_3                        \\
        4 & \leftrightarrow (1 , 1 , 0 , \circled{1} , 1 , \dots) = y_4                        \\
        5 & \leftrightarrow (0 , 1 , 1 , 1 , \circled{0} , \dots) = y_5                        \\
          & \vdots                                                                             \\
        x & =\big(\circled{0}, \circled{1}, \circled{0}, \circled{0}, \circled{1}, \dots \big)
    \end{align*}
    我们为什么要这样做？思考一下，对象 $x$ 是否可能属于上面提到的元素列表。
    \begin{itemize}
        \item $x = y_1$ 吗？不相等！因为 $x$ 与 $y_1$ 的第一个坐标不同。（在本例中，$x_1=0$ 而 $y_{1,1} = 1$。）
        \item $x = y_2$ 吗？不相等！因为 $x$ 与 $y_2$ 的第二个坐标不同。（在本例中，$x_2=1$ 而 $y_{2,2} = 0$。）
        \item $x = y_3$ 吗？不相等！因为 $x$ 与 $y_3$ 的第三个坐标不同。（在本例中，$x_3=0$ 而 $y_{3,3} = 1$。）
    \end{itemize}
    一般来讲，对于任意 $i \in \mathbb{N}$，我们可以保证 $x$ 和 $y_i$ 在第 $i$ 个坐标上是不同的。因此，\textbf{没有}一个 $y_i$ 对象等于这个新对象 $x$。也就是说
    \[\big(\forall i \in \mathbb{N} \centerdot x_i \ne y_{i,i}\big) \implies \big(\forall i \in \mathbb{N} \centerdot x \ne yi\big)\]
    但是根据我们对 $x$ 的定义，它确实是一个有序无限的 $0, 1$ 列表，所以它必然是 $\{0, 1\}^{\mathbb{N}}$ 的一个元素。

    这就产生了一个矛盾。我们假设可以列出集合中的所有元素，但随后我们用这种顺序构造了一个集合中的元素，而这个元素显然不在列表中。$\hashx$

    因此 $\{0, 1\}^{\mathbb{N}}$ 为不可数无限集。
\end{proof}

请注意：这是一个非常巧妙的论证。这是我最喜欢的数学证明之一。康托尔真是个天才，他想出了这个证明，更有趣的是，这个证明实际上相当简单且令人难忘。我们相信你不会忘记这个``沿主对角线切换值''的论证。我们甚至可以用八个字总结整个证明，这进一步彰显了它的精彩。

\begin{corollary}
    任意至少两个元素的集合的可数无限次笛卡尔积是不可数无限的。
\end{corollary}
（注意：我们实际上只需要说明乘积中的集合都不为空，且其中只有有限多个集合可以只有一个元素。）

\subsubsection*{示例}

你可能会好奇：什么样的集合是不可数无限的呢？我们知道这样的集合吗？当然知道！下面是一些例子。\\

\begin{example}[所有无限长二进制字符串的集合]

    你可能已经注意到，我们在上面证明中使用的集合 --- 即 $\{0, 1\}^\mathbb{N}$ --- 实际上就是无限长二进制字符串集合 $S$！$\{0, 1\}^\mathbb{N}$ 中的元素是无限长的有序序列，每个位置上的值都是 \verb|0| 或 \verb|1|。$S$ 中的元素也是无限长的 \verb|0| 和 \verb|1| 的有序序列，只是不包含括号和逗号。因此，这两者之间存在一个非常自然的双射关系（只需去掉括号和逗号，或者再加上它们），所以我们将这两个集合视为相同集合。

    我们在上面的示例 \ref{ex:example7.6.25} 中看到，所有有限长二进制字符串的集合是可数无限集。最新的结果表明，所有无限长二进制字符串的集合是不可数无限集。另一种证明这一事实的方法是找到 $S$ 和 $\mathcal{P}(\mathbb{N})$ 之间的双射关系，然后应用康托尔定理，该定理表明 $|\mathbb{N}| < |\mathcal{P}(\mathbb{N})|$。（详见练习 \ref{exc:exercises7.8.33}。）
\end{example}

\begin{example}[$\mathbb{R}$ 是不可数无限集]

    这是我们第一次接触到一个不可数无限的标准数集。我们可以用上面的结论来证明这一点。

    这个说法在直觉上是合理的，因为实数轴看起来比自然数集 $\mathbb{N}$ 或整数集 $\mathbb{Z}$ 大得多。但我们也知道，有理数集 $\mathbb{Q}$ 是可数无限集，并且在实数轴上有无数个有理数存在。实际上，\emph{在任意两个实数}之间都有无限多个有理数。

    我们将看到，实数集 $\mathbb{R}$ 确实是不可数无限集。此外，我们还会证明 $\mathbb{R}$ 和幂集 $\mathcal{P}(\mathbb{N})$ 具有相同的``无限大小''；也就是说，我们将证明 $|\mathbb{R}| = |\mathcal{P}(\mathbb{N})|$。 (请记住，这比仅仅说两个集合都是不可数集具有更多信息量；不可数无限集有很多级别，我们暂时不深入讨论这些，以免让我们头脑爆炸。)

    直观上，要理解 $\mathbb{R}$ 是不可数无限集，首先可以将 $\mathbb{R}$ 与集合 $\{0, 1, 2, 3, 4, 5, 6, 7, 8, 9\}^\mathbb{N}$ 联系起来。每个实数都可以用十进制表示，这实际上就是一个有序的、可数无限的数字列表。虽然在十进制表示中会出现像 $0.999999 \dots = 1$ 这样的问题，但这些问题并不重要。既然我们已经知道，即便像 $\{0, 1\}$ 这样的小集合，当我们无限次地取其乘积时，也会生成一个不可数集合，那么一个更大的集合，比如 $\{0, 1, \dots , 9\}$，也必定会生成一个不可数集合。这个直观的论证可以帮助你理解并向朋友解释这个结论。（事实上，大多数教科书中也是这样解释的。）

    更正式地，我们可以证明 $|\mathbb{R}| = |\mathcal{P}(\mathbb{N})|$。这个更强的结论意味着 $\mathbb{R}$ 是不可数无限集（因为康托尔定理告诉我们 $|\mathbb{N}| < |\mathcal{P}(\mathbb{N})|$）。为此，我们考虑集合
    \[I = \{y \in \mathbb{R} \mid 0 \le y \le 1\}\]
    即区间 $[0, 1] \subseteq \mathbb{R}$。我们将证明
    \[|{0, 1}^\mathbb{N}| = |\mathcal{P}(\mathbb{N})| = |I|\]
    然后再应用一些关于区间与 $\mathbb{R}$ 之间存在双射的结论。

    考虑函数 $f_1 : \{0, 1\}^{\mathbb{N}} \to I$，它输入一个无限长二进制字符串，在这个二进制字符串的前面加上一个小数点，并将其作为\textbf{十进制}表示进行评估。

    例如，考虑元素 $(1, 1, 0, 0, 1, 0, \dots)$，其余部分为 $0$。则
    \[f_1(1, 1, 0, 0, 1, 0, \dots) = 0.110010 \dots _\text{DEC} = \frac{1}{10^1}+\frac{1}{10^2}+\frac{1}{10^5} = \frac{11001}{100000}\]
    请注意，这确实是一个函数，因为它的任何输出都必然是一个实数（因为它有小数表示法；我们刚刚给出了它），并且它的值介于 $0$ 和 $1$ 之间，这是因为我们把小数点放在了最前面。此外，请注意函数 $f_1$ 是\textbf{单射}；两个不同的无限长二进制字符串在某些位置上必定不同，因此它们表示的小数在某些地方也会不同，从而不可能是相同的实数。这表明 $|\{0,1\}^{\mathbb{N}}| \le |I|$。

    考虑函数 $f2 : \{0, 1\}^{\mathbb{N}} \to I$，它输入一个无限长二进制字符串，在这个二进制字符串的前面加上一个小数点，并将其作为\textbf{二进制}表示进行评估。

    例如，考虑上面提到的相同元素。则
    \[f_2(1, 1, 0, 0, 1, 0, \dots) = 0.110010 \dots _\text{BIN} = \frac{1}{2^1}+\frac{1}{2^2}+\frac{1}{2^5} = \frac{25}{32}\]
    请注意，这确实是一个函数，因为它的任何输出都必然是一个实数；只需计算分数求和的结果，就会得到一个介于 $0$ 和 $1$ 之间的实数（即使序列是无限的，它也保证收敛）。例如，输入全是 $0$ 时，输出为 $0$；输入全是 $1$ 时，输出为 $1$，因为
    \[\frac{1}{2}+\frac{1}{4}+\frac{1}{8}+\dots = \sum_{k \in \mathbb{N}} \frac{1}{2^k} = 1\]
    此外，请注意，函数 $f_2$ 是\textbf{满射}。这一事实依赖于一些关于有理数和无理数的外部知识；具体来说，任何无理数都可以通过一系列二进制有理数（分母为 $2$ 的幂的有理数）来逼近。我们不会详细阐述或证明这些结论，但我们认为通过一些例子，你会逐渐理解其中的原理。事实上，搜索一下无理数的二进制展开形式，你会发现一些有趣的结果。

    因为 $f_2$ 是满射，这表明 $|\{0,1\}^{\mathbb{N}}| \ge |I|$。综上，我们得出结论 $|\{0,1\}^{\mathbb{N}}| = |I|$。我们还知道 $|\mathcal{P}(\mathbb{N})| = |\{0, 1\}^{\mathbb{N}}|$（见练习 \ref{exc:exercises7.8.33}），所以我们知道 $|I| = |\mathcal{P}(\mathbb{N})|$。

    最后一步是证明 $|I| = |\mathbb{R}|$。回看 \ref{sec:section7.5.4} 节中的练习 \ref{exc:exercises7.5.5}。在那里我们找到了集合 $J = \{y \in \mathbb{R} \mid -1 < y < 1\}$ 和 $\mathbb{R}$ 之间的双射。很容易找到集合 $J$ 和集合 $K = \{y \in \mathbb{R} \mid 0 < y < 1\}$ 之间的双射（不妨现在试一下！）。这表明 $|\mathbb{R}| = |J| = |K|$。此外，$K \subseteq I$，他们之间唯一的区别在于 $0$ 和 $1$ 这两个元素，因此 $K| = |I|$。最终，我们证明了 $|I| = |\mathbb{R}|$。因此，我们可以得出如下结论
    \[|\mathbb{R}| = |\mathcal{P}(\mathbb{N})|\]
    我们来看一下之前提到的两个论证：
    \begin{itemize}
        \item 考虑集合 $\{0, 1, 2, 3, 4, 5, 6, 7, 8, 9\}^\mathbb{N}$
        \item 考虑集合 $\{0, 1\}^\mathbb{N}$
    \end{itemize}
    这两个论证都涉及到一些关于十进制展开和二进制展开的知识。似乎没有简单的方法绕过这一点，所以我们希望上述结果仍然是令人信服的。特别是，你可以思考一下上面讨论中 $f_2$ 是\textbf{满射}但不是\textbf{单射}的结论。你能说服自己接受这个观点吗？你能说服别人吗？
\end{example}

\subsubsection*{定理}

让我们来看一个关于不可数集的结论。然后，在继续之前，我们会陈述一个关于无限集的最终定理。

\begin{lemma}\label{lemma7.6.29}
    假设 $A$ 为不可数无限集，$B$ 为可数无限集，且 $B \subseteq A$。则 $A-B$ 为不可数无限集。
\end{lemma}

（注意：我们\emph{不需要}假设 $B \subseteq A$。如果不是这种情况，可以将 $A$ 和 $B \cap A$ 作为集合来考虑。）

\begin{proof}
    留作 \ref{sec:section7.6.5} 节练习 \ref{exc:exercises7.6.5}。

    (\textbf{提示}：采用反证法……)
\end{proof}

\subsubsection*{识别无限集}

为了定义\textbf{无限集}，我们首先定义了\textbf{有限集}，然后称任何\emph{不是}有限集的集合都是无限集。下面的定理展示了另一种定义\textbf{无限集}的方法。具体来说，我们可以说一个集合是无限集，当且仅当我们能够找到一个双射，使其映射到自身的一个真子集。首先，让我们陈述并证明一个有用的引理；我们将在接下来的定理证明中用到它。

\begin{lemma}\label{lemma7.6.30}
    设 $A$ 为任意集合。则 $A$ 为无限集 $\iff$ 存在 $B \subset A$ 为可数无限集。
\end{lemma}

\begin{proof}
    $\impliedby$ 方向很明显。如果 $A$ 比某个无限集更大，它当然也是无限集。

    $\implies$ 方向则更有趣一些。假设 $A$ 为无限集。设 $\bigstar \in A$ 为某个特定元素。我们将其排除在外，并构造一个不包含 $\bigstar$ 且是可数无限的集合 $B$。这样就能保证 $B \subset A$，同时 $B \ne A$。

    考虑集合 $A_1 = A - \{\bigstar\}$。这个集合也是无限集，所以我们可以选择某个元素 $b_1 \in A_1$。

    考虑集合 $A_2 = A_1- \{b_1\} = A - \{\bigstar, b_1\}$。这个集合也是无限集，所以我们可以选择某个元素 $b_2 \in A_2$。

    考虑集合 $A_3 = A_2- \{b_2\} = A - \{\bigstar, b_1, b_2\}$。这个集合也是无限集，所以我们可以选择某个元素 $b_3 \in A_3$。

    这个过程可以永远持续下去。定义 $B = \{b_1, b_2, b_3, \dots\}$。（注意：我们虽然在这里``取极限''，但这是可以接受的，因为我们并不是用这个方法来``保留'' $B$ 的任何属性。我们只是\emph{构造}出对象 $B$。）

    需要注意的是，$B$ 是可数无穷的，因为它与 $\mathbb{N}$ 显然存在双射关系。
\end{proof}

有了这个引理，我们就可以成熟并证明接下来的结论了：

\begin{theorem}
    设 $A$ 为任意集合。则 $A$ 为无限集 $\iff$ 存在 $B \subset A$ 满足函数 $f : A \to B$ 为双射。
\end{theorem}

\begin{proof}
    ($\implies$) 假设 $A$ 为无限集。我们必须找到真子集 $B \subset A$ 和双射 $f : A \to B$。

    因为 $A \ne \varnothing$，取任意元素 $x \in A$。考虑 $B = A-\{x\}$，显然 $B \subset A$。

    我们需要证明存在双射 $f : A \to B$。

    根据上面的引理 \ref{lemma7.6.30}，我们知道可以找到一个可数无限的真子集 $C \subset B$。（注意：集合 $A$ 是无限集，因此 $B = A - \{x\}$ 也是无限集，因为我们只移除了一个元素。如果你对此有疑问，可以假设 $B$ 是有限集，那么它必然有某个具体的大小；那么，集合 $A$ 的大小又是多少呢？）

    因此 $C$ 是可数无限集，我们可以列出 $C$ 中元素 $\{y_1, y_2, y_3, \dots\}$。

    （注意：这里的想法是存在一个双射 $g : \mathbb{N} \to C$，所以我们可以令 $y_1 = g(1), y_2 = g(2)$，以此类推。）

    定义函数 $f : A \to B$ 为
    \[\forall y \in A \centerdot f(y) = \begin{cases}
            y       & \text{如果对于所有}\; i \in \mathbb{N} \;\text{且}\; y \ne x, y \ne yi \\
            y_1     & \text{如果}\; y = x                                               \\
            y_{i+1} & \text{如果对于某个}\; i \in \mathbb{N}, y = y_i
        \end{cases}\]
    这是一个双射，因为我们可以找到它的反函数 $F : B \to A$ 为
    \[\forall z \in B \centerdot F(z) = \begin{cases}
            z & \text{如果对于所有}\; i \in \mathbb{N}, z \ne y_i \\
            x & \text{如果}\; z = y_1                \\
            y_{i-1} &\text{如果对于某个}\; i \in \mathbb{N}-\{1\}, z = y_i
        \end{cases}\]
    我们将留给读者来证明 $F = f^{-1}$。（至少画出图像，从直觉上说服自己。）\\

    ($\impliedby$) 这个方向声称无限集是\emph{唯一}具有这种性质的集合。我们将通过反证法来证明这一点。也就是说，我们将证明任何有限集都\emph{不能}与其真子集建立双射关系。

    假设 $A$ 为有限集，即它的大小为 $n \in \mathbb{N}$。考虑 $A$ 的任意真子集 $B \subset A$。我们要证明 $A$ 和 $B$ 之间不存在双射。

    为了引出矛盾而假设存在这样一个双射 $f : A \to B$。由于 $B$ 是有限集且 $B \subset A$，设 $B$ 的大小为 $m$，则 $m < n$。因此，存在双射 $g : B \to [m]$。将这两个双射复合，我们得到双射 $h : A \to [m]$。于是，我们有 $|A| = n$ 且 $|A| = m$，这意味着 $m = n$。然而，我们已经知道 $m < n$，这就产生了矛盾。$\hashx$

    （注意：我们也可以通过\emph{鸽笼原理}来论证这一点。虽然我们还没有讨论这个原理，但很快就会讨论。基本上，当 $n > m$ 时，我们不能得到双射 $p:[n] \to [m]$，因为没有足够的``笼子''可以容纳 $n$ 只``鸽子''。）
\end{proof}

在解决问题时，可能你需要证明某个集合是有限集。与其证明无法找到与任何有限集合之间存在双射，不如考虑使用这个定理！只要你能找到一个真子集和一个双射，就可以利用这个定理来证明集合是无限集。
